# 关于React的Key

标签（空格分隔）： react key

---

## React中的子级校正
> 校正就是React每次重新render渲染之后更新DOM的过程。在一般的情况下它会根据子级的顺序来做校正。
比如说......

        <div>
            <p>title_1</p>
            <p>title_2</p>          //第一次渲染
        </div>
        /*
        **
        **/
        <div>
            <p>title_2</p>          //第二次渲染
        </div>

> 上面demo中的操作删除了第一个节点。直观上来看像是只删除了第一个节点。但是React的操作顺序是：先更新第一个子级的内容，然后直接删除第二个子级。


----------
## 动态子级
> 如果子组件位置会改变（如在搜索结果中）或者有新组件添加到列表开头这种情况，为了优化React性能。可以把节点用key标识出来。为子级添加独一无二的key之后，子级就可以被区分开...就可以在多个渲染阶段保持自己的特征和状态

> 上面的那种情况，在带上key之后，子级会重新排序而不是。

### 请确保key添加到子级数组里组件本身上，而不是子级内部的Html

> 也可以用Object来装载有key的子级。
> Object的属性值(key值)作为标识每个子组件的key，对应的value值就是子组件。
> 因为JS对象的属性值并不是按顺序保存。数字型属性会按大小排序并且排在其它属性前面。这种情况可以在key前面加一个字符串前缀避免

    render：function() {
        var items = {};
    
        this.props.results.forEach(function(result) {
          // 如果 result.id 看起来是一个数字（比如短哈希），那么
          // 对象字面量的顺序就得不到保证。这种情况下，需要添加前缀
          // 来确保 key 是字符串。
          items['result-' + result.id] = <li>{result.text}</li>;
        }); 
        
         return (
          <ol>
            {items}
          </ol>
        );
    }
    


----------
## 关于React的单向数据流机制
> 在React中，数据通过props从拥有者(owner)流向归属者(ownee)。

> 拥有者通过它自身的props和state计算出一些数据，我们可以手动把这些值绑定到归属者(子组件)的props上。这样数据就可以从上级流向下级。

> 这整个过程会递归调用，所以数据的变化会自动在所有被使用的地方自动反映出来。

